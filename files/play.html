<!DOCTYPE html>
<html lang="en">

<head>
	<title>%s | text adventure games</title>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" href="navbar.css">
</head>

<body>
	<div id="navbar" onload="iframe_hide(this)">
		<a class="left" href="/">Home</a>
		<a class="right" href="/signin">Sign in/Sign up</a>
	</div>
	<div class="container">
		<p>%s</p>
		<p>%s</p>
		<form method="get" action="/play" autocomplete="off">
			<input id="command" name="cmd" autofocus>
			<input hidden value="%s" name="gameState">
			<input type="submit" id="submit" disabled>
		</form>
		<p>%s</p>
		<a href="/start?game=%s"><button>Restart this game</button></a>
	</div>
</body>

<script>
	const navbar = document.getElementById('navbar'),
		input = document.getElementById('command'),
		submit_button = document.getElementById('submit'),
		valid_cmd = /^(?:go|use|get|grab|pick up) ./;

	try {
		if (window.self !== window.top) navbar.hidden = true;
	} catch (e) {
		navbar.hidden = true;
	}

	input.addEventListener('keypress', ({ key }) => {
		if (key === 'Enter') input.parentElement.submit();
	});

	input.addEventListener('input', () => {
		submit_button.disabled = !valid_cmd.test(input.value);
	});
</script>

</html>